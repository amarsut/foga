/* ==========================================================================
   OPTIMERAD MOBILE.CSS - FOGAROLLI LOGISTICS
   Sammanställd version med alla UI-fixar
   ========================================================================== */

@media (max-width: 768px) {

    /* --- 1. GRUNDLAYOUT & NAVIGATION --- */
    .app-container { flex-direction: column !important; height: 100vh !important; background-color: #fdfcfb; }
    .main-content { flex: 1; padding: 10px !important; padding-bottom: 80px !important; overflow-y: auto !important; }
    #content-area { padding: 0 !important; }
    
    /* Sidebar */
    .sidebar { position: fixed !important; top: 0 !important; left: -280px !important; bottom: 0 !important; width: 240px !important; height: 100vh !important; background: var(--fog-brown) !important; z-index: 10000 !important; display: flex !important; flex-direction: column !important; transition: left 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important; box-shadow: 5px 0 25px rgba(0, 0, 0, 0.5) !important; }
    .sidebar.mobile-active { left: 0 !important; }
    .sidebar-nav { display: flex !important; flex-direction: column !important; padding: 10px !important; }
    .nav-item { padding: 12px 15px !important; justify-content: flex-start !important; font-size: 0.9rem !important; color: rgba(255, 255, 255, 0.8) !important; }
    .nav-item.active i { color: white !important; filter: drop-shadow(0 0 5px rgba(255, 255, 255, 0.3)); }

    /* Topp-Header */
    .top-header { padding: 10px 5px !important; margin-bottom: 0 !important; }
    .header-info h1 { font-size: 1.1rem !important; font-weight: 900 !important; }
    .logo-area, .user-profile, .sidebar-header, .user-info, .sidebar-top h2 { display: none !important; }

    /* --- 2. MODALER (FULLSKÄRM & STRUKTUR) --- */
    .modal-overlay { padding: 0 !important; align-items: stretch !important; overflow: hidden !important; }
    .modal-content, .bento-modal { width: 100vw !important; height: 100dvh !important; max-width: none !important; margin: 0 !important; border-radius: 0 !important; position: fixed !important; top: 0 !important; left: 0 !important; display: flex !important; flex-direction: column !important; background-color: #fdfcfb !important; }
    
    /* Header: Fordonsnamn Vänster, Status + X Höger */
    .modal-header-vision { padding: 15px 12px !important; display: flex !important; flex-direction: row !important; justify-content: space-between !important; align-items: center !important; flex-wrap: nowrap !important; }
    .header-right-actions { display: flex !important; flex-direction: row !important; align-items: center !important; gap: 10px !important; }
    .status-pill-header { order: 1 !important; font-size: 0.6rem !important; padding: 4px 10px !important; }
    .fm-close-icon { order: 2 !important; flex-shrink: 0; }

    .fm-nav-tabs { display: flex !important; padding: 0 12px !important; border-bottom: 1px solid #eee !important; gap: 15px !important; background: #fff !important; }
    .fm-tab-link { flex: 1; text-align: center; padding: 15px 0 !important; font-size: 0.8rem !important; }
    
    /* Översikt & Scroll-fix */
    .fm-pane { padding: 0 !important; height: 100% !important; display: none !important; }
    .fm-pane.active { display: flex !important; flex-direction: column !important; }
    #tab-overview { overflow-y: auto !important; -webkit-overflow-scrolling: touch; }
    .bento-grid-modal { display: flex !important; flex-direction: column !important; padding: 10px 8px !important; gap: 15px !important; }
    .bento-box { padding: 15px 12px !important; width: 100% !important; border-radius: 12px !important; box-sizing: border-box !important; }
    
    /* Teknisk data Layout */
    .fm-col-right-compact { order: -1 !important; padding: 0 12px !important; width: 100% !important; }
    .fm-data-grid-minimal { display: grid !important; grid-template-columns: 1fr 1fr !important; gap: 15px 10px !important; }
    .fm-input-group-minimal input { font-size: 0.95rem !important; font-weight: 800 !important; }

    /* Media & Journal */
    #tab-media.active { padding: 10px !important; overflow-y: auto !important; }
    #tab-journal.active { padding: 0 !important; }
    #chat-feed-v3 { padding: 15px 10px !important; gap: 15px !important; }
    .teams-input-bar { width: 100% !important; padding: 6px 12px !important; box-sizing: border-box !important; }
    #chat-text-input { min-width: 0 !important; flex: 1 !important; }

    /* --- 3. FLEET & FORDON (HUVUDVY) --- */
    .mo-grid { gap: 8px !important; }
    .mo-card { margin-bottom: 0 !important; padding: 12px 15px !important; min-height: auto !important; }

    /* --- 4. SKAPA UPPDRAG & PACKLISTOR --- */
    .create-view-container.single-column { padding: 0 !important; }
    .form-container.compact-form { max-width: 100% !important; border-radius: 0 !important; box-shadow: none !important; border: none !important; padding: 0 !important; }
    .inner-scroll-area { padding: 15px !important; }
    .form-grid { grid-template-columns: 1fr !important; gap: 15px !important; }
    .modern-input, .modern-select { height: 50px !important; font-size: 1rem !important; }
    .cart-chip-container { display: grid !important; grid-template-columns: 1fr 1fr !important; gap: 8px !important; }
    
    /* Packlist-specifikt */
    .unit-tabs { overflow-x: auto !important; padding: 8px 10px !important; gap: 6px !important; }
    .unit-tab { padding: 6px 14px !important; font-size: 0.8rem !important; border-radius: 8px !important; white-space: nowrap !important; }
    .form-check-item { padding: 12px 10px !important; border-bottom: 1px solid #f0f0f0 !important; }
    .form-check-item i { font-size: 1.5rem !important; }
    .form-footer { flex-direction: column !important; gap: 12px !important; padding: 20px 20px 110px 20px !important; }

    /* --- 5. KALENDER (KORTVY & NAVIGATION) --- */
    #calendar-container.mobile-card-view { background: transparent !important; border: none !important; padding: 0 !important; box-shadow: none !important; }
    .calendar-filter-bar { display: flex !important; flex-wrap: nowrap !important; overflow-x: auto !important; padding: 12px !important; gap: 8px !important; -webkit-overflow-scrolling: touch; }
    .filter-btn { flex: 0 0 auto !important; }

    /* Fix för Navigeringsknappar ( < Idag > ) */
    .mobile-nav-header, .fc-header-toolbar { display: flex !important; justify-content: space-between !important; align-items: center !important; padding: 10px 15px !important; background: #fff !important; border-radius: 12px !important; margin-bottom: 10px !important; box-shadow: 0 2px 8px rgba(0,0,0,0.05) !important; }
    .mobile-nav-header button, .fc-button, .fc-today-button { background: #f5f5f5 !important; color: var(--fog-brown) !important; border: 1px solid #eee !important; padding: 8px 16px !important; border-radius: 10px !important; font-size: 0.85rem !important; font-weight: 800 !important; cursor: pointer !important; }
    
    /* Dag-kort & Textbrytning */
    .day-card { background: #fff !important; margin-bottom: 12px !important; border-radius: 16px !important; border: 1px solid rgba(0,0,0,0.05) !important; box-shadow: 0 2px 10px rgba(0,0,0,0.03) !important; overflow: hidden; }
    .day-card-header { padding: 12px 15px !important; background: #fcfaf8 !important; font-size: 0.8rem !important; font-weight: 850 !important; color: var(--fog-brown) !important; border-bottom: 1px solid #f0f0f0 !important; }
    .mobile-event-card { padding: 15px !important; border-bottom: 1px solid #f5f5f5 !important; }
    
    /* Fix för tomma dagar som bryts */
    .m-empty-day { padding: 25px 20px !important; text-align: center; font-size: 0.85rem !important; color: #ccc; font-style: italic; line-height: 1.6 !important; min-height: 80px !important; display: flex !important; align-items: center !important; justify-content: center !important; }

    /* --- 6. STATISTIK --- */
    .stats-dashboard-compact { padding: 5px !important; }
    .stats-kpi-row { grid-template-columns: 1fr 1fr !important; gap: 8px !important; }
    .kpi-box { padding: 12px !important; flex-direction: column !important; text-align: center !important; }
    .stats-main-grid { grid-template-columns: 1fr !important; gap: 15px !important; }
    .chart-container-card { height: 280px !important; padding: 15px !important; }
}

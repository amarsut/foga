/* ==========================================================================
   OPTIMERAD MOBILE.CSS - FOGAROLLI LOGISTICS
   Innehåller: Layout, Modaler, Fordonsvy, Chatt, Packlista & Statistik
   ========================================================================== */

@media (max-width: 768px) {

    /* --- 1. GENERELL LAYOUT & SIDEBAR --- */
    .app-container {
        flex-direction: column !important;
        height: 100vh !important;
        background-color: #fdfcfb;
    }

    .main-content {
        flex: 1;
        padding: 10px !important;
        padding-bottom: 80px !important;
        overflow-y: auto !important;
    }

    #content-area {
        padding: 0 !important;
    }

    /* Sidebar Navigation */
    .sidebar {
        position: fixed !important;
        top: 0 !important;
        left: -280px !important; /* Startläge: Utanför skärmen */
        bottom: 0 !important;
        width: 240px !important;
        height: 100vh !important;
        background: var(--fog-brown) !important;
        z-index: 10000 !important;
        display: flex !important;
        flex-direction: column !important;
        transition: left 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
        box-shadow: 5px 0 25px rgba(0, 0, 0, 0.5) !important;
    }

    .sidebar.mobile-active {
        left: 0 !important;
    }

    .sidebar-nav {
        display: flex !important;
        flex-direction: column !important;
        padding: 10px !important;
    }

    .nav-item {
        padding: 12px 15px !important;
        font-size: 0.9rem !important;
        color: rgba(255, 255, 255, 0.8) !important;
        justify-content: flex-start !important;
    }

    .nav-item.active i {
        color: white !important;
        filter: drop-shadow(0 0 5px rgba(255, 255, 255, 0.3));
    }

    /* Topp-header & Väder */
    .top-header {
        padding: 10px 5px !important;
        margin-bottom: 0 !important;
    }

    .header-info h1 {
        font-size: 1.1rem !important;
        font-weight: 900 !important;
    }

    .weather-widget {
        background: #fff !important;
        border: 1px solid #eee !important;
        padding: 4px 10px !important;
        font-size: 0.7rem !important;
    }

    /* --- 2. MODALER (FULLSKÄRM & GLOBAL FIX) --- */
    .modal-overlay {
        padding: 0 !important;
        align-items: stretch !important;
        overflow: hidden !important;
    }

    .modal-content, .bento-modal {
        width: 100vw !important;
        height: 100dvh !important;
        max-width: none !important;
        margin: 0 !important;
        border-radius: 0 !important;
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        display: flex !important;
        flex-direction: column !important;
        background-color: #fdfcfb !important;
    }

    .modal-header-vision {
        padding: 15px 12px !important;
        flex-direction: row-reverse !important; /* Swappar X och Status */
        gap: 10px;
    }

    .fm-nav-tabs {
        padding: 0 12px !important;
        gap: 15px !important;
    }

    .fm-tab-link {
        font-size: 0.8rem !important;
        padding: 15px 0 !important;
        flex: 1;
        text-align: center;
    }

    .fm-viewport {
        flex: 1 !important;
        overflow: hidden !important;
    }

    /* --- 3. FLEET-MODAL (ÖVERSIKT & TEKNISK DATA) --- */
    .fm-pane {
        padding: 0 !important; /* Eliminerar luft på sidorna */
        height: 100% !important;
    }

    #tab-overview {
        overflow-y: auto !important;
        -webkit-overflow-scrolling: touch;
    }

    .bento-grid-modal {
        display: flex !important;
        flex-direction: column !important;
        padding: 10px 8px !important; /* Minimal sidoluft */
        gap: 15px !important;
    }

    .bento-box {
        padding: 15px 12px !important;
        width: 100% !important;
        border-radius: 12px !important;
        box-sizing: border-box !important;
    }

    /* Teknisk data i toppen */
    .fm-col-right-compact {
        order: -1 !important;
        padding: 0 12px !important;
        width: 100% !important;
    }

    .fm-data-grid-minimal {
        grid-template-columns: 1fr 1fr !important;
        gap: 15px 10px !important;
        border: none !important;
    }

    .fm-input-group-minimal input {
        font-size: 0.95rem !important;
        font-weight: 800 !important;
    }

    /* Media-fliken */
    #tab-media.active {
        display: flex !important;
        flex-direction: column !important;
        height: 100% !important;
        padding: 10px !important;
        overflow-y: auto !important;
    }

    #tab-media > div {
        display: flex !important;
        flex-direction: column !important;
        gap: 20px !important;
    }

    #tab-media div[style*="border-left"] {
        border-left: none !important;
        padding-left: 0 !important;
    }

    .image-grid-overview {
        grid-template-columns: repeat(3, 1fr) !important;
        gap: 8px !important;
    }

    /* --- 4. JOURNAL / CHATT --- */
    #tab-journal.active {
        display: flex !important;
        flex-direction: column !important;
        height: 100% !important;
        padding: 0 !important;
    }

    #chat-feed-v3 {
        padding: 15px 10px !important;
        gap: 15px !important;
    }

    .teams-content-wrapper {
        max-width: 85% !important;
    }

    .teams-input-container {
        padding: 10px !important;
        background: #fff !important;
    }

    .teams-input-bar {
        width: 100% !important;
        gap: 8px !important;
        padding: 6px 12px !important;
        box-sizing: border-box !important;
    }

    #chat-text-input {
        min-width: 0 !important;
        flex: 1 !important;
    }

    /* --- 5. SKAPA UPPDRAG & PACKLISTA --- */
    .form-container.compact-form {
        border: none !important;
        box-shadow: none !important;
    }

    .form-grid {
        grid-template-columns: 1fr !important;
    }

    .cart-chip-container {
        grid-template-columns: 1fr 1fr !important;
    }

    /* Plocklista (Steg 2) */
    .inner-list-container {
        padding: 0 !important;
    }

    .list-group-header {
        padding: 8px 10px !important;
        border-radius: 0 !important;
        font-size: 0.75rem !important;
    }

    .form-check-item {
        padding: 12px 10px !important;
        border-radius: 0 !important;
    }

    .form-check-item i {
        font-size: 1.5rem !important;
    }

    .unit-tabs {
        padding: 8px 10px !important;
        overflow-x: auto !important;
    }

    /* --- 6. KALENDER --- */
    .calendar-filter-bar {
        display: flex !important;
        flex-wrap: nowrap !important;
        overflow-x: auto !important;
        padding: 12px !important;
        -webkit-overflow-scrolling: touch;
    }

    .filter-btn {
        flex: 0 0 auto !important;
    }

    .day-card {
        width: 100% !important;
        margin: 0 0 10px 0 !important;
    }

    /* --- 7. STATISTIK --- */
    .stats-kpi-row {
        grid-template-columns: 1fr 1fr !important;
        gap: 8px !important;
    }

    .kpi-box {
        padding: 12px !important;
        flex-direction: column !important;
    }

    .stats-main-grid {
        grid-template-columns: 1fr !important;
    }

    .chart-container-card {
        height: 280px !important;
    }
}
